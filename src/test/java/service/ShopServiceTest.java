package service;import com.food.dao.model.Shop;import com.food.framework.util.JsonUtil;import com.food.model.ShopModel;import com.food.service.ShopService;import org.junit.Assert;import org.junit.Test;import org.junit.runner.RunWith;import org.springframework.test.context.ContextConfiguration;import org.springframework.test.context.junit4.AbstractJUnit4SpringContextTests;import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;import javax.annotation.Resource;import java.util.List;/** * Created by user on 16-11-27. */@RunWith(SpringJUnit4ClassRunner.class)@ContextConfiguration(locations = "classpath:core/spring-servlet.xml")public class ShopServiceTest extends AbstractJUnit4SpringContextTests {    //AbstractTransactionalJUnit4SpringContextTests { //有事务功能的接口    @Resource    private ShopService shopService;    @Test    public void testInsert() throws Exception {        String source = "{\"address\":\"太阳宫南街凯德购物中心四楼4-38(西贝莜面村斜对面)\",\"consumptionPerPerson\":69,\"environmentalScience\":9.0,\"flavor\":9.1,\"name\":\"船歌鱼水饺\",\"point\":{\"lat\":39.97208,\"lng\":116.44753},\"service\":9.0,\"shopHours\":\"11:00-21:00 周一至周日\",\"tels\":[\"010-84299781\"]}";        ShopModel shopModel = JsonUtil.parseObject(source, ShopModel.class);        Shop shop = Shop.getNewInstance(shopModel);        int count = shopService.insert(shop);        Assert.assertTrue(count > 0);    }    @Test    public void testSelectShopByName() throws Exception {        Shop shop = new Shop();        shop.setName("叶叶菩提");        List<Shop> shopList = shopService.selectShopByName(shop);        Assert.assertTrue(shopList.size() > 0);    }    @Test    public void testInsertWithoutRepeat() throws Exception {        String source = "{\"address\":\"太阳宫南街凯德购物中心四楼4-38(西贝莜面村斜对面)\",\"consumptionPerPerson\":69,\"environmentalScience\":9.0,\"flavor\":9.1,\"name\":\"船歌鱼水饺\",\"point\":{\"lat\":39.97208,\"lng\":116.44753},\"service\":9.0,\"shopHours\":\"11:00-21:00 周一至周日\",\"tels\":[\"010-84299781\"]}";        ShopModel shopModel = JsonUtil.parseObject(source, ShopModel.class);        Shop shop = Shop.getNewInstance(shopModel);        int count = 0;        List<Shop> shopList = shopService.selectShopByName(shop);        if (shopList == null || shopList.size() == 0) {            count = shopService.insert(shop);        }        Assert.assertTrue(count == 0);    }}